(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{TUkU:function(e,i,t){"use strict";t.r(i),t.d(i,"Tab2PageModule",(function(){return w}));var o=t("TEn/"),n=t("ofXK"),a=t("3Pt+"),l=t("qtYk"),r=t("tyNb"),c=t("mrSG"),s=t("fXoL"),d=t("tAfe"),h=t("/sJY"),b=t("B7Vy"),m=t("9YJ4"),f=t("RU0F"),p=t("U3FU");function u(e,i){1&e&&s.Jb(0,"ion-icon",12)}function g(e,i){1&e&&s.Jb(0,"ion-icon",13)}function y(e,i){1&e&&s.Jb(0,"ion-icon",14)}function L(e,i){if(1&e){const e=s.Mb();s.Lb(0,"ion-item-sliding"),s.Lb(1,"ion-item",4),s.Tb("click",(function(){s.ac(e);const t=i.$implicit;return s.Vb().openFile(t)})),s.dc(2,u,1,0,"ion-icon",5),s.dc(3,g,1,0,"ion-icon",6),s.dc(4,y,1,0,"ion-icon",7),s.Lb(5,"ion-label",8),s.ec(6),s.Lb(7,"p"),s.ec(8),s.Kb(),s.Kb(),s.Kb(),s.Lb(9,"ion-item-options",9),s.Lb(10,"ion-item-option",10),s.Tb("click",(function(){s.ac(e);const t=i.$implicit;return s.Vb().deleteFile(t)})),s.Jb(11,"ion-icon",11),s.Kb(),s.Kb(),s.Kb()}if(2&e){const e=i.$implicit;s.yb(2),s.Yb("ngIf",e.name.endsWith("jpg")),s.yb(1),s.Yb("ngIf",e.name.endsWith("MOV")||e.name.endsWith("mp4")),s.yb(1),s.Yb("ngIf",e.name.endsWith("wav")),s.yb(2),s.gc(" ",e.name," "),s.yb(2),s.fc(e.fullPath)}}const I=[{path:"",component:(()=>{class e{constructor(e,i,t,o,n,a,l,r){this.imagePicker=e,this.mediaCapture=i,this.file=t,this.media=o,this.streamingMedia=n,this.photoViewer=a,this.actionSheetController=l,this.plt=r,this.files=[]}ngOnInit(){this.plt.ready().then(()=>{let e=this.file.dataDirectory;this.file.checkDir(e,"my_media").then(()=>{this.loadFiles()},i=>{this.file.createDir(e,"my_media",!1)})})}loadFiles(){this.file.listDir(this.file.dataDirectory,"my_media").then(e=>{this.files=e},e=>console.log("error loading files: ",e))}selectMedia(){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.actionSheetController.create({header:"What would you like to add?",buttons:[{text:"Capture Image",handler:()=>{this.captureImage()}},{text:"Record Video",handler:()=>{this.recordVideo()}},{text:"Record Audio",handler:()=>{this.recordAudio()}},{text:"Load multiple",handler:()=>{this.pickImages()}},{text:"Cancel",role:"cancel"}]});yield e.present()}))}pickImages(){this.imagePicker.getPictures({}).then(e=>{for(var i=0;i<e.length;i++)this.copyFileToLocalDir(e[i])})}captureImage(){this.mediaCapture.captureImage().then(e=>{e.length>0&&this.copyFileToLocalDir(e[0].fullPath)},e=>console.error(e))}recordAudio(){this.mediaCapture.captureAudio().then(e=>{e.length>0&&this.copyFileToLocalDir(e[0].fullPath)},e=>console.error(e))}recordVideo(){this.mediaCapture.captureVideo().then(e=>{e.length>0&&this.copyFileToLocalDir(e[0].fullPath)},e=>console.error(e))}copyFileToLocalDir(e){let i=e;e.indexOf("file://")<0&&(i="file://"+e);const t=i.split(".").pop(),o=`${Date.now()}.${t}`,n=i.substr(i.lastIndexOf("/")+1),a=i.substr(0,i.lastIndexOf("/")+1);this.file.copyFile(a,n,this.file.dataDirectory+"my_media",o).then(e=>{this.loadFiles()},e=>{console.log("error: ",e)})}openFile(e){if(e.name.indexOf(".wav")>-1){const i=e.nativeURL.replace(/^file:\/\//,"");this.media.create(i).play()}else e.name.indexOf(".MOV")>-1||e.name.indexOf(".mp4")>-1?this.streamingMedia.playVideo(e.nativeURL):e.name.indexOf(".jpg")>-1&&this.photoViewer.show(e.nativeURL,"MY awesome image")}deleteFile(e){const i=e.nativeURL.substr(0,e.nativeURL.lastIndexOf("/")+1);this.file.removeFile(i,e.name).then(()=>{this.loadFiles()},e=>console.log("error remove: ",e))}}return e.\u0275fac=function(i){return new(i||e)(s.Ib(d.a),s.Ib(h.a),s.Ib(b.a),s.Ib(m.a),s.Ib(f.a),s.Ib(p.a),s.Ib(o.a),s.Ib(o.D))},e.\u0275cmp=s.Cb({type:e,selectors:[["app-tag2"]],decls:12,vars:1,consts:[["color","primary"],[4,"ngFor","ngForOf"],["fill","clear","expand","full","color","light",3,"click"],["slot","start","name","document"],[3,"click"],["name","image","slot","start",4,"ngIf"],["name","videocam","slot","start",4,"ngIf"],["name","mic","slot","start",4,"ngIf"],[1,"ion-text-wrap"],["side","start"],["color","danger",3,"click"],["name","trash","slot","icon-only"],["name","image","slot","start"],["name","videocam","slot","start"],["name","mic","slot","start"]],template:function(e,i){1&e&&(s.Lb(0,"ion-header"),s.Lb(1,"ion-toolbar",0),s.Lb(2,"ion-title"),s.ec(3," Ionic Media Capture "),s.Kb(),s.Kb(),s.Kb(),s.Lb(4,"ion-content"),s.Lb(5,"ion-list"),s.dc(6,L,12,5,"ion-item-sliding",1),s.Kb(),s.Kb(),s.Lb(7,"ion-footer"),s.Lb(8,"ion-toolbar",0),s.Lb(9,"ion-button",2),s.Tb("click",(function(){return i.selectMedia()})),s.Jb(10,"ion-icon",3),s.ec(11," Select Media "),s.Kb(),s.Kb(),s.Kb()),2&e&&(s.yb(6),s.Yb("ngForOf",i.files))},directives:[o.g,o.z,o.y,o.e,o.o,n.h,o.f,o.c,o.h,o.m,o.j,n.i,o.n,o.l,o.k],styles:[""]}),e})()}];let F=(()=>{class e{}return e.\u0275mod=s.Gb({type:e}),e.\u0275inj=s.Fb({factory:function(i){return new(i||e)},imports:[[r.i.forChild(I)],r.i]}),e})(),w=(()=>{class e{}return e.\u0275mod=s.Gb({type:e}),e.\u0275inj=s.Fb({factory:function(i){return new(i||e)},imports:[[o.A,n.b,a.a,l.a,F]]}),e})()}}]);