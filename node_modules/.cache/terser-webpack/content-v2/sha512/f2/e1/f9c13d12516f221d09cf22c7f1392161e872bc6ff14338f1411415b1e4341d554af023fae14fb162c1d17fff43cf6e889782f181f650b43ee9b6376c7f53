{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{TUkU:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"Tab2PageModule\",(function(){return tab2_module_Tab2PageModule}));var ionic_angular=__webpack_require__(\"TEn/\"),common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),explore_container_module=__webpack_require__(\"qtYk\"),router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),core=__webpack_require__(\"fXoL\"),ngx=__webpack_require__(\"tAfe\"),_ivy_ngcc_ngx=__webpack_require__(\"/sJY\"),File_ivy_ngcc_ngx=__webpack_require__(\"B7Vy\"),media_ivy_ngcc_ngx=__webpack_require__(\"9YJ4\"),streaming_media_ivy_ngcc_ngx=__webpack_require__(\"RU0F\"),photo_viewer_ivy_ngcc_ngx=__webpack_require__(\"U3FU\");function Tab2Page_ion_item_sliding_6_ion_icon_2_Template(rf,ctx){1&rf&&core.Jb(0,\"ion-icon\",12)}function Tab2Page_ion_item_sliding_6_ion_icon_3_Template(rf,ctx){1&rf&&core.Jb(0,\"ion-icon\",13)}function Tab2Page_ion_item_sliding_6_ion_icon_4_Template(rf,ctx){1&rf&&core.Jb(0,\"ion-icon\",14)}function Tab2Page_ion_item_sliding_6_Template(rf,ctx){if(1&rf){const _r6=core.Mb();core.Lb(0,\"ion-item-sliding\"),core.Lb(1,\"ion-item\",4),core.Tb(\"click\",(function(){core.ac(_r6);const f_r1=ctx.$implicit;return core.Vb().openFile(f_r1)})),core.dc(2,Tab2Page_ion_item_sliding_6_ion_icon_2_Template,1,0,\"ion-icon\",5),core.dc(3,Tab2Page_ion_item_sliding_6_ion_icon_3_Template,1,0,\"ion-icon\",6),core.dc(4,Tab2Page_ion_item_sliding_6_ion_icon_4_Template,1,0,\"ion-icon\",7),core.Lb(5,\"ion-label\",8),core.ec(6),core.Lb(7,\"p\"),core.ec(8),core.Kb(),core.Kb(),core.Kb(),core.Lb(9,\"ion-item-options\",9),core.Lb(10,\"ion-item-option\",10),core.Tb(\"click\",(function(){core.ac(_r6);const f_r1=ctx.$implicit;return core.Vb().deleteFile(f_r1)})),core.Jb(11,\"ion-icon\",11),core.Kb(),core.Kb(),core.Kb()}if(2&rf){const f_r1=ctx.$implicit;core.yb(2),core.Yb(\"ngIf\",f_r1.name.endsWith(\"jpg\")),core.yb(1),core.Yb(\"ngIf\",f_r1.name.endsWith(\"MOV\")||f_r1.name.endsWith(\"mp4\")),core.yb(1),core.Yb(\"ngIf\",f_r1.name.endsWith(\"wav\")),core.yb(2),core.gc(\" \",f_r1.name,\" \"),core.yb(2),core.fc(f_r1.fullPath)}}const routes=[{path:\"\",component:(()=>{class Tab2Page{constructor(imagePicker,mediaCapture,file,media,streamingMedia,photoViewer,actionSheetController,plt){this.imagePicker=imagePicker,this.mediaCapture=mediaCapture,this.file=file,this.media=media,this.streamingMedia=streamingMedia,this.photoViewer=photoViewer,this.actionSheetController=actionSheetController,this.plt=plt,this.files=[]}ngOnInit(){this.plt.ready().then((()=>{let path=this.file.dataDirectory;this.file.checkDir(path,\"my_media\").then((()=>{this.loadFiles()}),(err=>{this.file.createDir(path,\"my_media\",!1)}))}))}loadFiles(){this.file.listDir(this.file.dataDirectory,\"my_media\").then((res=>{this.files=res}),(err=>console.log(\"error loading files: \",err)))}selectMedia(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const actionSheet=yield this.actionSheetController.create({header:\"What would you like to add?\",buttons:[{text:\"Capture Image\",handler:()=>{this.captureImage()}},{text:\"Record Video\",handler:()=>{this.recordVideo()}},{text:\"Record Audio\",handler:()=>{this.recordAudio()}},{text:\"Load multiple\",handler:()=>{this.pickImages()}},{text:\"Cancel\",role:\"cancel\"}]});yield actionSheet.present()}))}pickImages(){this.imagePicker.getPictures({}).then((results=>{for(var i=0;i<results.length;i++)this.copyFileToLocalDir(results[i])}))}captureImage(){this.mediaCapture.captureImage().then((data=>{data.length>0&&this.copyFileToLocalDir(data[0].fullPath)}),(err=>console.error(err)))}recordAudio(){this.mediaCapture.captureAudio().then((data=>{data.length>0&&this.copyFileToLocalDir(data[0].fullPath)}),(err=>console.error(err)))}recordVideo(){this.mediaCapture.captureVideo().then((data=>{data.length>0&&this.copyFileToLocalDir(data[0].fullPath)}),(err=>console.error(err)))}copyFileToLocalDir(fullPath){let myPath=fullPath;fullPath.indexOf(\"file://\")<0&&(myPath=\"file://\"+fullPath);const ext=myPath.split(\".\").pop(),newName=`${Date.now()}.${ext}`,name=myPath.substr(myPath.lastIndexOf(\"/\")+1),copyFrom=myPath.substr(0,myPath.lastIndexOf(\"/\")+1);this.file.copyFile(copyFrom,name,this.file.dataDirectory+\"my_media\",newName).then((success=>{this.loadFiles()}),(error=>{console.log(\"error: \",error)}))}openFile(f){if(f.name.indexOf(\".wav\")>-1){const path=f.nativeURL.replace(/^file:\\/\\//,\"\");this.media.create(path).play()}else f.name.indexOf(\".MOV\")>-1||f.name.indexOf(\".mp4\")>-1?this.streamingMedia.playVideo(f.nativeURL):f.name.indexOf(\".jpg\")>-1&&this.photoViewer.show(f.nativeURL,\"MY awesome image\")}deleteFile(f){const path=f.nativeURL.substr(0,f.nativeURL.lastIndexOf(\"/\")+1);this.file.removeFile(path,f.name).then((()=>{this.loadFiles()}),(err=>console.log(\"error remove: \",err)))}}return Tab2Page.ɵfac=function(t){return new(t||Tab2Page)(core.Ib(ngx.a),core.Ib(_ivy_ngcc_ngx.a),core.Ib(File_ivy_ngcc_ngx.a),core.Ib(media_ivy_ngcc_ngx.a),core.Ib(streaming_media_ivy_ngcc_ngx.a),core.Ib(photo_viewer_ivy_ngcc_ngx.a),core.Ib(ionic_angular.a),core.Ib(ionic_angular.D))},Tab2Page.ɵcmp=core.Cb({type:Tab2Page,selectors:[[\"app-tag2\"]],decls:12,vars:1,consts:[[\"color\",\"primary\"],[4,\"ngFor\",\"ngForOf\"],[\"fill\",\"clear\",\"expand\",\"full\",\"color\",\"light\",3,\"click\"],[\"slot\",\"start\",\"name\",\"document\"],[3,\"click\"],[\"name\",\"image\",\"slot\",\"start\",4,\"ngIf\"],[\"name\",\"videocam\",\"slot\",\"start\",4,\"ngIf\"],[\"name\",\"mic\",\"slot\",\"start\",4,\"ngIf\"],[1,\"ion-text-wrap\"],[\"side\",\"start\"],[\"color\",\"danger\",3,\"click\"],[\"name\",\"trash\",\"slot\",\"icon-only\"],[\"name\",\"image\",\"slot\",\"start\"],[\"name\",\"videocam\",\"slot\",\"start\"],[\"name\",\"mic\",\"slot\",\"start\"]],template:function(rf,ctx){1&rf&&(core.Lb(0,\"ion-header\"),core.Lb(1,\"ion-toolbar\",0),core.Lb(2,\"ion-title\"),core.ec(3,\" Ionic Media Capture \"),core.Kb(),core.Kb(),core.Kb(),core.Lb(4,\"ion-content\"),core.Lb(5,\"ion-list\"),core.dc(6,Tab2Page_ion_item_sliding_6_Template,12,5,\"ion-item-sliding\",1),core.Kb(),core.Kb(),core.Lb(7,\"ion-footer\"),core.Lb(8,\"ion-toolbar\",0),core.Lb(9,\"ion-button\",2),core.Tb(\"click\",(function(){return ctx.selectMedia()})),core.Jb(10,\"ion-icon\",3),core.ec(11,\" Select Media \"),core.Kb(),core.Kb(),core.Kb()),2&rf&&(core.yb(6),core.Yb(\"ngForOf\",ctx.files))},directives:[ionic_angular.g,ionic_angular.z,ionic_angular.y,ionic_angular.e,ionic_angular.o,common.h,ionic_angular.f,ionic_angular.c,ionic_angular.h,ionic_angular.m,ionic_angular.j,common.i,ionic_angular.n,ionic_angular.l,ionic_angular.k],styles:[\"\"]}),Tab2Page})()}];let tab2_routing_module_Tab2PageRoutingModule=(()=>{class Tab2PageRoutingModule{}return Tab2PageRoutingModule.ɵmod=core.Gb({type:Tab2PageRoutingModule}),Tab2PageRoutingModule.ɵinj=core.Fb({factory:function(t){return new(t||Tab2PageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),Tab2PageRoutingModule})(),tab2_module_Tab2PageModule=(()=>{class Tab2PageModule{}return Tab2PageModule.ɵmod=core.Gb({type:Tab2PageModule}),Tab2PageModule.ɵinj=core.Fb({factory:function(t){return new(t||Tab2PageModule)},imports:[[ionic_angular.A,common.b,fesm2015_forms.a,explore_container_module.a,tab2_routing_module_Tab2PageRoutingModule]]}),Tab2PageModule})()}}]);","extractedComments":[]}